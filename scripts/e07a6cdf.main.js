!function(){var a;Ember.LOG_VERSION=!1,a=window.Bridge=Ember.Application.create({rootElement:"#bridge-app"}),function(){this.Bridge.CONTRACTS=["1C","1D","1H","1S","1NT","2C","2D","2H","2S","2NT","3C","3D","3H","3S","3NT","4C","4D","4H","4S","4NT","5C","5D","5H","5S","5NT","6C","6D","6H","6S","6NT","7C","7D","7H","7S","7NT"],this.Bridge.PASS="PASS",this.Bridge.DOUBLE="X",this.Bridge.REDOUBLE="XX",this.Bridge.MODIFIERS=[a.DOUBLE,a.REDOUBLE],this.Bridge.BIDS=a.CONTRACTS.concat(a.MODIFIERS,[a.PASS]),this.Bridge.CARDS=["C2","C3","C4","C5","C6","C7","C8","C9","CT","CJ","CQ","CK","CA","D2","D3","D4","D5","D6","D7","D8","D9","DT","DJ","DQ","DK","DA","H2","H3","H4","H5","H6","H7","H8","H9","HT","HJ","HQ","HK","HA","S2","S3","S4","S5","S6","S7","S8","S9","ST","SJ","SQ","SK","SA"],this.Bridge.DIRECTIONS=["N","E","S","W"],this.Bridge.VULNERABILITIES=["NONE","NS","EW","BOTH"],this.Bridge.SUITS=["C","D","H","S"],this.Bridge.TRUMPS=a.SUITS.concat("NT"),this.Bridge.SIDES=["NS","EW"]}.call(this),function(){this.Bridge.EmailField=Ember.TextField.extend({type:"email",attributeBindings:["required"]})}.call(this),function(){this.Bridge.NumberField=Ember.TextField.extend({type:"number",attributeBindings:["min","max","step","required"]})}.call(this),function(){var b,c,d,e,f,g,h,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};g=function(a,b){var c,d,e;return e=a.map(function(a){return a[0]}).uniq(),c=f(e,b),d=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],Ember.copy(a).sort(function(a,b){return a[0]===b[0]?d.indexOf(a[1])-d.indexOf(b[1]):c.indexOf(a[0])-c.indexOf(b[0])})},f=function(a,b){var c,d;return c=["S","C"].filter(function(b){return i.call(a,b)>=0}),d=["H","D"].filter(function(b){return i.call(a,b)>=0}),c.contains(b)?c.splice(c.indexOf(b),1).concat(d.splice(0,1),c.splice(0,1),d.splice(0,1)):d.contains(b)?d.splice(d.indexOf(b),1).concat(c.splice(0,1),d.splice(0,1),c.splice(0,1)):c.length>=d.length?c.splice(0,1).concat(d.splice(0,1),c.splice(0,1),d.splice(0,1)):d.splice(0,1).concat(c.splice(0,1),d.splice(0,1),c.splice(0,1))},h=function(b,c){var d,e,f,g,h,i,j;return d=function(b){return a.CARDS.indexOf(b)},e=function(a,b){return b-a},f=b[0][0],h=b.filter(function(a){return a[0]===f}),g=h.map(d).sort(e),j=b.filter(function(a){return a[0]===c}),i=j.map(d).sort(e),a.CARDS[i[0]||g[0]]},c=function(b,c){var d;return d=a.DIRECTIONS.indexOf(b),c.map(function(b,c){return a.DIRECTIONS[(d+c)%4]})},b=function(b,c){var d,e,f,g,h,i,j,k,l;return d=c.filter(function(a){return/^\d/.test(a)}),j=d[d.length-1],null!=j?(e=a.DIRECTIONS.indexOf(b),k=c.indexOf(j),h=c.find(function(a,b){return a[1]===j[1]&&k%2===b%2}),i=c.indexOf(h),g=-1!==c.slice(k).indexOf("X")?"X":"",l=-1!==c.slice(k).indexOf("XX")?"X":"",f=a.DIRECTIONS[(e+i)%4],""+j+g+l+f):void 0},d=function(b,c,d){var e;return e=a.DIRECTIONS.indexOf(b),d.map(function(b,f){var g,i,j,k;return f>0&&0===f%4&&(i=Math.floor(f/4)-1,g=d.slice(4*i,4*i+4),j=h(g,c),k=g.indexOf(j),e+=k),a.DIRECTIONS[++e%4]})},e=function(a,b){var c;return c=parseInt(a[0],10),b-(c+6)},this.Bridge.Utils={sortCards:g,sortCardSuits:f,trickWinner:h,auctionDirections:c,auctionContract:b,playDirections:d,score:e}}.call(this),function(){this.Bridge.Auction=Ember.ArrayProxy.extend({arrangedContent:function(){return this.get("content").map(function(b){return a.Bid.create({compact:b})})}.property(),contentArrayWillChange:function(a,b,c){var d,e,f,g;if(c){for(g=[],d=e=b,f=b+c-1;f>=b?f>=e:e>=f;d=f>=b?++e:--e)g.push(this.get("arrangedContent").removeAt(d));return g}},contentArrayDidChange:function(b,c,d,e){var f,g,h,i;if(e){for(i=[],f=g=c,h=c+e-1;h>=c?h>=g:g>=h;f=h>=c?++g:--g)i.push(this.get("arrangedContent").insertAt(f,a.Bid.create({compact:b.objectAt(f)})));return i}},reindex:function(){var b=this;return a.Utils.auctionDirections(this.get("dealer"),this.get("content").concat("")).forEach(function(a,c){var d;return(d=b.objectAt(c))?d.setProperties({index:c,direction:a}):b.set("currentDirection",a)})}.observes("dealer","arrangedContent.@each").on("init"),isCompleted:function(){return this.get("length")>3&&this.slice(this.get("length")-3).everyProperty("isPass")}.property("length","@each.isPass"),currentSide:function(){return/N|S/.test(this.get("currentDirection"))?"NS":"EW"}.property("currentDirection"),contract:function(){var b;return b=a.Utils.auctionContract(this.get("dealer"),this.get("content")),null!=b?a.Contract.create({content:b}):void 0}.property("isCompleted","content.@each")})}.call(this),function(){this.Bridge.Bid=Ember.Object.extend({isContract:function(){return/^\d/.test(this.get("content"))}.property("content"),isPass:function(){return"PASS"===this.get("content")}.property("content"),isDouble:function(){return"X"===this.get("content")}.property("content"),isRedouble:function(){return"XX"===this.get("content")}.property("content"),isModifier:function(){return/^X/.test(this.get("content"))}.property("content"),level:function(){return this.get("isContract")?parseInt(this.get("content")[0],10):void 0}.property("content","isContract"),trump:function(){return this.get("isContract")?this.get("content").slice(1):void 0}.property("content","isContract"),side:function(){return/N|S/.test(this.get("direction"))?"NS":"EW"}.property("direction"),toString:function(){return this.get("content")},compact:function(a,b){var c;return 1===arguments.length?[this.get("content"),this.get("alert")].without(void 0).join("!"):(c=b.split("!",2),this.set("content",c[0]),this.set("alert",c[1]))}.property("content","alert")})}.call(this),function(){this.Bridge.Board=Ember.Object.extend({init:function(){return this._super.apply(this,arguments),this.set("auction",a.Auction.create({content:this.get("bids"),dealer:this.get("dealer")})),this.set("play",a.Play.create({content:this.get("cards")}))},auctionIsCompletedDidChange:function(){return this.get("auction.isCompleted")?this.get("play").set("contract",this.get("auction.contract")):void 0}.observes("auction.isCompleted"),contract:function(){return this.get("auction.isCompleted")?this.get("auction.contract"):void 0}.property("auction.contract","auction.isCompleted"),currentDirection:function(){return this.get("auction.isCompleted")?this.get("play.currentDirection"):this.get("auction.currentDirection")}.property("auction.isCompleted","auction.currentDirection","play.currentDirection"),result:function(){var a,b;if(this.get("play.isCompleted"))return this.get("play.declarerSideWonTricksNumber")-this.get("contract.tricksToMake");if(a=this.get("claim"))switch(b=parseInt(a.slice(1),10),a[0]){case this.get("play.declarer"):case this.get("play.dummy"):return this.get("play.declarerSideWonTricksNumber")+b-this.get("contract.tricksToMake");case this.get("play.lho"):case this.get("play.rho"):return 13-this.get("play.winningCards").length-b-this.get("contract.tricksToMake")}}.property("play.isCompleted","contract.tricksToMake","play.declarerSideWonTricksNumber","claim"),isFinished:function(){return!Ember.isNone(this.get("result"))}.property("result")})}.call(this),function(){this.Bridge.Card=Ember.Object.extend({value:function(){return this.get("content")[1]}.property("content"),suit:function(){return this.get("content")[0]}.property("content"),side:function(){return/N|S/.test(this.get("direction"))?"NS":"EW"}.property("direction"),isLead:function(){return 0===this.get("index")%4}.property("index"),trick:function(){return Math.floor(this.get("index")/4)}.property("index"),toString:function(){return this.get("content")}})}.call(this),function(){this.Bridge.Contract=Ember.Object.extend({level:function(){return parseInt(this.get("content")[0],10)}.property("content"),trump:function(){return/^\d(C|D|H|S|NT)/.exec(this.get("content"))[1]}.property("content"),direction:function(){return this.get("content").slice(-1)}.property("content"),isDoubled:function(){return/^\d(C|D|H|S|NT)X[^X]/.test(this.get("content"))}.property("content"),isRedoubled:function(){return/^\d(C|D|H|S|NT)XX/.test(this.get("content"))}.property("content"),side:function(){return/N|S/.test(this.get("direction"))?"NS":"EW"}.property("direction"),bid:function(){return/^[1-7](?:C|D|H|S|NT)/.exec(this.get("content"))[0]}.property("content"),toString:function(){return this.get("content")},tricksToMake:function(){return this.get("level")+6}.property("level")})}.call(this),function(){var b;this.Bridge.Deal=b=function(){function b(a,b,c){this.id=bigInt(a),this.dealer=b,this.vulnerable=c}return b.MAX=bigInt("53644737765488792839237440000"),b.random=function(){var b,c,d,e,f,g;for(b=a.DIRECTIONS[Math.floor(4*Math.random())],f=a.VULNERABILITIES[Math.floor(4*Math.random())];!(null!=d?d.lesserOrEquals(a.Deal.MAX):void 0);){for(e="",c=g=0;28>=g;c=++g)e+=Math.floor(9*Math.random());d=bigInt(e)}return new a.Deal(d,b,f)},b.prototype.isValid=function(){var b;return null!=a.DIRECTIONS.indexOf(this.dealer)&&null!=a.VULNERABILITIES.indexOf(this.vulnerable)&&(null!=(b=this.id)?b.greaterOrEquals(0):void 0)&&this.id.lesserOrEquals(this.constructor.MAX)},b.prototype.n=function(){return this._n||this.dealCards().n},b.prototype.e=function(){return this._e||this.dealCards().e},b.prototype.s=function(){return this._s||this.dealCards().s},b.prototype.w=function(){return this._w||this.dealCards().w},b.prototype.dealCards=function(){var b,c,d=this;return this._n=[],this._e=[],this._s=[],this._w=[],c=this.constructor.MAX,b=this.id,a.CARDS.forEach(function(a,e){var f;return f=c.multiply(13-d._n.length).divide(52-e),b.lesser(f)?d._n.push(a):(b=b.subtract(f),f=c.multiply(13-d._e.length).divide(52-e),b.lesser(f)?d._e.push(a):(b=b.subtract(f),f=c.multiply(13-d._s.length).divide(52-e),b.lesser(f)?d._s.push(a):(b=b.subtract(f),f=c.multiply(13-d._w.length).divide(52-e),d._w.push(a)))),c=f}),{n:this._n,e:this._e,s:this._s,w:this._w}},b}()}.call(this),function(){this.Bridge.Play=Ember.ArrayProxy.extend({contract:function(b,c){return 2===arguments.length?null==c||c instanceof a.Contract?c:a.Contract.create({content:c}):void 0}.property(),arrangedContent:function(){return this.get("content").map(function(b){return a.Card.create({content:b})})}.property(),contentArrayWillChange:function(a,b,c){var d,e,f,g;if(c){for(g=[],d=e=b,f=b+c-1;f>=b?f>=e:e>=f;d=f>=b?++e:--e)g.push(this.get("arrangedContent").removeAt(d));return g}},contentArrayDidChange:function(b,c,d,e){var f,g,h,i;if(e){for(i=[],f=g=c,h=c+e-1;h>=c?h>=g:g>=h;f=h>=c?++g:--g)i.push(this.get("arrangedContent").insertAt(f,a.Card.create({content:b.objectAt(f)})));return i}},trump:Ember.computed.alias("contract.trump"),declarer:Ember.computed.alias("contract.direction"),dummy:function(){return{N:"S",E:"W",S:"N",W:"E"}[this.get("declarer")]}.property("declarer"),lho:function(){return{N:"E",E:"S",S:"W",W:"N"}[this.get("declarer")]}.property("declarer"),rho:function(){return{N:"W",E:"N",S:"E",W:"S"}[this.get("declarer")]}.property("declarer"),reindex:function(){var b=this;return a.Utils.playDirections(this.get("declarer"),this.get("trump"),this.get("content").concat("")).forEach(function(a,c,d){var e,f;return(e=b.objectAt(c))?(f=4*Math.floor(c/4)+4,e.setProperties({index:c,direction:a,isWinning:a===d[f]})):b.set("currentDirection",a)})}.observes("declarer","trump","arrangedContent.@each").on("init"),isCompleted:function(){return 52===this.get("length")}.property("length"),currentSuit:function(){return 0!==this.get("length")%4?this.filterProperty("isLead").get("lastObject.suit"):void 0}.property("length","arrangedContent.@each"),winningCards:function(){return this.filterProperty("isWinning")}.property("arrangedContent.@each.isWinning"),nsWonTricksNumber:function(){var a;return null!=(a=this.get("winningCards"))?a.filterProperty("side","NS").length:void 0}.property("winningCards.@each"),ewWonTricksNumber:function(){var a;return null!=(a=this.get("winningCards"))?a.filterProperty("side","EW").length:void 0}.property("winningCards.@each"),declarerSideWonTricksNumber:function(){switch(this.get("declarer")){case"N":case"S":return this.get("nsWonTricksNumber");case"E":case"W":return this.get("ewWonTricksNumber")}}.property("declarer","nsWonTricksNumber","ewWonTricksNumber")})}.call(this),function(){this.Bridge.Table=Ember.Object.extend({board:function(b,c){return 2===arguments.length?null==c||c instanceof a.Board?c:a.Board.create(c):void 0}.property()})}.call(this),function(){this.Bridge.BidView=Ember.View.extend({classNames:["hint--top","hint--rounded"],classNameBindings:["isAlerted:bid-alerted"],attributeBindings:["alertBody:data-hint"],templateName:"bid",tagName:"td",content:function(){switch(!1){case!this.get("bid.isPass"):return"Pass";case!this.get("bid.isDouble"):return"Dbl";case!this.get("bid.isRedouble"):return"Rdbl";case!this.get("bid.isContract"):switch(this.get("bid.trump")){case"C":return this.get("bid.level")+"<span class='suit-c'>♣</span>";case"D":return this.get("bid.level")+"<span class='suit-d'>♦</span>";case"H":return this.get("bid.level")+"<span class='suit-h'>♥</span>";case"S":return this.get("bid.level")+"<span class='suit-s'>♠</span>";default:return this.get("bid.content")}}}.property("bid.content"),isAlerted:function(){return!Ember.isNone(this.get("bid.alert"))}.property("bid.alert"),alertBody:function(){return Ember.isEmpty(this.get("bid.alert"))?!1:this.get("bid.alert")}.property("bid.alert")})}.call(this),function(){this.Bridge.AlertView=Ember.View.extend({classNames:["btn btn-warning"],classNameBindings:["active"],template:function(){return"Alert"},tagName:"button",active:function(){return this.get("context.isAlerted")}.property("context.isAlerted"),click:function(){return this.set("context.isAlerted",!this.get("context.isAlerted"))}})}.call(this),function(){this.Bridge.ContractLevelView=Ember.View.extend({classNames:["btn"],classNameBindings:["selected:btn-info"],attributeBindings:["disabled"],templateName:"bidding_box/contract_level",tagName:"button",selected:function(){return this.get("context.level")===this.get("level")}.property("context.level"),disabled:function(){return this.get("context.isCompleted")||a.CONTRACTS.indexOf(this.get("context.contractBid"))>=a.CONTRACTS.indexOf(this.get("level")+"NT")}.property("context.contractBid","context.isCompleted","level"),click:function(){return this.set("context.level",this.get("level"))}})}.call(this),function(){this.Bridge.ContractSuitView=Ember.View.extend({classNames:["btn"],attributeBindings:["disabled"],templateName:"bidding_box/contract_suit",tagName:"button",disabled:function(){return this.get("context.isCompleted")||a.CONTRACTS.indexOf(this.get("context.contractBid"))>=a.CONTRACTS.indexOf(this.get("context.level")+this.get("suit"))}.property("context.isCompleted","context.contractBid","context.level","suit"),symbol:function(){switch(this.get("suit")){case"C":return"<span class='suit-c'>♣</span>";case"D":return"<span class='suit-d'>♦</span>";case"H":return"<span class='suit-h'>♥</span>";case"S":return"<span class='suit-s'>♠</span>";default:return this.get("suit")}}.property("suit"),click:function(){return this.get("context").bid(this.get("context.level")+this.get("suit"))}})}.call(this),function(){this.Bridge.DoubleView=Ember.View.extend({classNames:["btn","btn-danger"],attributeBindings:["disabled"],templateName:"bidding_box/double",tagName:"button",disabled:function(){return this.get("context.isCompleted")||!this.get("context.contract")||this.get("context.isContractDoubled")||this.get("context.isContractRedoubled")||this.get("context.currentSide")===this.get("context.contractSide")}.property("context.isCompleted","context.isContractDoubled","context.isContractRedoubled","context.currentSide","context.contractSide"),click:function(){return this.get("context").bid("X")}})}.call(this),function(){this.Bridge.PassView=Ember.View.extend({classNames:["btn","btn-success"],attributeBindings:["disabled"],templateName:"bidding_box/pass",tagName:"button",disabled:function(){return this.get("context.isCompleted")}.property("context.isCompleted"),click:function(){return this.get("context").bid("PASS")}})}.call(this),function(){this.Bridge.RedoubleView=Ember.View.extend({classNames:["btn","btn-primary"],attributeBindings:["disabled"],templateName:"bidding_box/redouble",tagName:"button",disabled:function(){return this.get("context.isCompleted")||!this.get("context.isContractDoubled")||this.get("context.isContractRedoubled")||this.get("context.currentSide")!==this.get("context.contractSide")}.property("context.isCompleted","context.isContractDoubled","context.isContractRedoubled","context.currentSide","context.contractSide"),click:function(){return this.get("context").bid("XX")}})}.call(this),function(){this.Bridge.CardView=Ember.View.extend({classNames:["card"],classNameBindings:["isDisabled:disabled","suitClassName"],templateName:function(){var a;return a=this.get("card.value")?this.get("card.value").toLowerCase():"unknown","cards/"+a}.property("card.value"),templateNameDidChange:function(){var a=this;return Ember.run.next(function(){return a.rerender()})}.observes("templateName"),suitClassName:function(){return this.get("card.suit")?"suit-"+this.get("card.suit").toLowerCase():void 0}.property("card.suit"),isDisabled:!0})}.call(this),function(){this.Bridge.ClaimInfoView=Ember.View.extend({classNames:["alert alert-info"],templateName:"claim/claim_info",isClaimed:Ember.computed.alias("context.isClaimed"),isVisible:function(){return this.get("isClaimed")}.property("isClaimed")})}.call(this),function(){this.Bridge.ClaimView=Ember.View.extend({classNames:["btn-group"],templateName:"claim/claim",direction:Ember.computed.alias("context.currentDirection"),isVisible:function(){return!this.get("context.isClaimed")}.property("context.isClaimed"),range:function(){var a,b,c,d;for(d=[],a=b=0,c=this.get("context.max");c>=0?c>=b:b>=c;a=c>=0?++b:--b)d.push(a);return d}.property("context.max")})}.call(this),function(){this.Bridge.DirectionView=Ember.View.extend({classNames:["hand-direction"],classNameBindings:["current"],templateName:"direction",tagName:"h3",current:function(){return this.get("context.currentDirection")===this.get("direction")}.property("context.currentDirection")})}.call(this),function(){this.Bridge.HandCardView=a.CardView.extend({isDisabled:function(){return!this.get("context.isPlaying")||""===this.get("card.content")||this.get("context.currentDirection")!==this.get("ownerDirection")||null!=this.get("context.currentSuit")&&this.get("context.currentSuit")!==this.get("card.suit")&&this.get("context.hasCardInCurrentSuit")}.property("content","context.isPlaying","context.currentDirection","context.currentSuit","context.hasCardInCurrentSuit"),click:function(){return this.get("isDisabled")?void 0:this.get("context").playCard(this.get("card"))}})}.call(this),function(){this.Bridge.TableView=Ember.View.extend({directionBinding:"controller.signedInUserDirection",templateName:function(){return("table_"+(this.get("direction")||"S")).toLowerCase()}.property("direction"),templateNameDidChange:function(){var a=this;return Ember.run.next(function(){return Ember.run.next(function(){return a.rerender()})})}.observes("templateName")})}.call(this),function(){this.Bridge.TrickCardView=a.CardView.extend({classNameBindings:["orderClassName"],isVisible:function(){return!!this.get("card.value")}.property("card.value"),orderClassName:function(){return Ember.isNone(this.get("card.index"))?void 0:"order-"+this.get("card.index")%4}.property("card.index")})}.call(this),function(){this.Bridge.ApplicationController=Ember.Controller.extend()}.call(this),function(){this.Bridge.AuctionController=Ember.Controller.extend({needs:["table"],auction:Ember.computed.alias("controllers.table.board.auction"),dealer:Ember.computed.alias("auction.dealer"),dealerIndex:function(){return a.DIRECTIONS.indexOf(this.get("dealer"))}.property("dealer"),rows:function(){var a,b,c,d,e,f;if(b=this.get("dealerIndex"),a=this.get("auction.length"),null!=b&&a){for(d=Math.floor((b+this.get("auction.length")-1)/4),f=[],c=e=0;d>=0?d>=e:e>=d;c=d>=0?++e:--e)f.push(Ember.Object.create({n:this.get("auction.arrangedContent."+(4*c-b)),e:this.get("auction.arrangedContent."+(4*c-b+1)),s:this.get("auction.arrangedContent."+(4*c-b+2)),w:this.get("auction.arrangedContent."+(4*c-b+3))}));return f}return[]}.property("auction.@each","dealerIndex")})}.call(this),function(){this.Bridge.BiddingBoxController=Ember.Controller.extend({needs:["table"],auction:Ember.computed.alias("controllers.table.board.auction"),contract:Ember.computed.alias("auction.contract"),contractDirection:Ember.computed.alias("contract.direction"),contractSide:Ember.computed.alias("contract.side"),contractLevel:Ember.computed.alias("contract.level"),contractTrump:Ember.computed.alias("contract.trump"),contractBid:Ember.computed.alias("contract.bid"),isContractDoubled:Ember.computed.alias("contract.isDoubled"),isContractRedoubled:Ember.computed.alias("contract.isRedoubled"),currentDirection:Ember.computed.alias("auction.currentDirection"),currentSide:Ember.computed.alias("auction.currentSide"),isCompleted:Ember.computed.alias("auction.isCompleted"),isEnabled:function(){return!this.get("isCompleted")}.property("isCompleted"),descriptionDidChange:function(){return this.set("isAlerted",!Ember.isEmpty(this.get("description")))}.observes("description"),isAlertedDidChange:function(){return this.get("isAlerted")?void 0:this.set("description",void 0)}.observes("isAlerted"),bid:function(a){var b,c;return b=this.get("isAlerted")?this.get("description")||"":void 0,c=[a,b].without(void 0).join("!"),this.setProperties({level:null,description:void 0}),this.get("auction").pushObject(c)}})}.call(this),function(){this.Bridge.ClaimController=Ember.Controller.extend({needs:["table"],board:Ember.computed.alias("controllers.table.board"),play:Ember.computed.alias("board.play"),currentDirection:Ember.computed.alias("play.currentDirection"),isEnabled:function(){return!!this.get("play.contract")}.property("play.contract"),isClaimed:function(){return!Ember.isNone(this.get("tricks"))}.property("tricks"),winningCards:function(){var a;return null!=(a=this.get("play"))?a.filterProperty("isWinning"):void 0}.property("play.@each"),tricks:function(){var a;return null!=(a=this.get("board.claim"))?a.slice(1):void 0}.property("board.claim"),direction:function(){var a;return null!=(a=this.get("board.claim"))?a[0]:void 0}.property("board.claim"),max:function(){var a;return 13-(null!=(a=this.get("winningCards"))?a.length:void 0)||0}.property("winningCards.@each"),actions:{claim:function(a){return this.get("board").set("claim",""+this.get("currentDirection")+a)}}})}.call(this),function(){this.Bridge.HandController=Ember.ArrayController.extend({needs:["table"],board:Ember.computed.alias("controllers.table.board"),play:Ember.computed.alias("controllers.table.board.play"),dummy:Ember.computed.alias("play.dummy"),currentSuit:Ember.computed.alias("play.currentSuit"),currentDirection:Ember.computed.alias("play.currentDirection"),contract:Ember.computed.alias("play.contract"),trump:Ember.computed.alias("contract.trump"),isDummy:function(){return this.get("direction")===this.get("dummy")}.property("direction","dummy"),playDidChange:function(){var a;return(a=this.get("play"))?a.addArrayObserver(this,{willChange:this.playContentWillChange,didChange:this.playContentDidChange}):void 0}.observes("play.content.@each"),playWillChange:function(){var a;return(a=this.get("play"))?a.removeArrayObserver(this):void 0}.observesBefore("play.content.@each"),initialDidChange:function(){var b;return b=a.Utils.sortCards(this.get("initial")||["","","","","","","","","","","","",""],this.get("trump")),this.set("content",b.map(function(b){return a.Card.create({content:b})})),this.playContentDidChange(this.get("play"),0,0,this.get("play.length"))}.observes("initial","trump").on("init"),playContentWillChange:function(a,b,c){var d,e,f,g,h;if(c){for(h=[],e=f=b,g=b+c-1;g>=b?g>=f:f>=g;e=g>=b?++f:--f)d=a.objectAt(e),d.get("direction")===this.get("direction")?h.push(this.pushObject(d)):h.push(void 0);return h}},playContentDidChange:function(a,b,c,d){var e,f,g,h,i,j,k;if(d){for(k=[],h=i=b,j=b+d-1;j>=b?j>=i:i>=j;h=j>=b?++i:--i)e=a.objectAt(h),f=e.get("content"),e.get("direction")===this.get("direction")?(g=this.findProperty("content",f))?k.push(this.removeObject(g)):k.push(this.popObject()):k.push(void 0);return k}},isPlaying:function(){return!!this.get("contract")&&!this.get("board.isFinished")}.property("contract","board.isFinished"),hasCardInCurrentSuit:function(){return this.someProperty("suit",this.get("currentSuit"))}.property("@each","currentSuit"),playCard:function(a){return this.get("play").pushObject(a.get("content"))}}),a.register("controller:hand_n",a.HandController.extend({direction:"N",initial:Ember.computed.alias("controllers.table.board.n")})),a.register("controller:hand_e",a.HandController.extend({direction:"E",initial:Ember.computed.alias("controllers.table.board.e")})),a.register("controller:hand_s",a.HandController.extend({direction:"S",initial:Ember.computed.alias("controllers.table.board.s")})),a.register("controller:hand_w",a.HandController.extend({direction:"W",initial:Ember.computed.alias("controllers.table.board.w")}))}.call(this),function(){this.Bridge.SummaryController=Ember.Controller.extend({needs:["table"],auction:Ember.computed.alias("controllers.table.board.auction"),play:Ember.computed.alias("controllers.table.board.play"),dealer:Ember.computed.alias("controllers.table.board.dealer"),vulnerable:Ember.computed.alias("controllers.table.board.vulnerable"),result:Ember.computed.alias("controllers.table.board.result"),nsWonTricksNumber:Ember.computed.alias("play.nsWonTricksNumber"),ewWonTricksNumber:Ember.computed.alias("play.ewWonTricksNumber"),contract:function(){return this.get("auction.isCompleted")?this.get("auction.contract"):void 0}.property("auction.isCompleted"),resultString:function(){var a;if(a=this.get("result"),!Ember.isNone(a))switch(!1){case!(a>0):return"+"+a;case 0!==a:return"=";case!(0>a):return""+a}}.property("result"),isNSvulnerable:function(){var a;return"BOTH"===(a=this.get("vulnerable"))||"NS"===a}.property("vulnerable"),isEWvulnerable:function(){var a;return"BOTH"===(a=this.get("vulnerable"))||"EW"===a}.property("vulnerable")})}.call(this),function(){this.Bridge.TableController=Ember.ObjectController.extend({needs:["bidding_box","hand_n","hand_e","hand_s","hand_w","trick","summary","auction","claim"],currentDirection:Ember.computed.alias("board.currentDirection")})}.call(this),function(){this.Bridge.TrickController=Ember.Controller.extend({needs:["table"],play:Ember.computed.alias("controllers.table.board.play"),trickNumber:Ember.computed.alias("play.lastObject.trick"),getCard:function(a){var b,c=this;return null!=(b=this.get("play"))?b.find(function(b){return b.get("trick")===c.get("trickNumber")&&b.get("direction")===a}):void 0},n:function(){return this.getCard("N")}.property("trickNumber","play.@each"),e:function(){return this.getCard("E")}.property("trickNumber","play.@each"),s:function(){return this.getCard("S")}.property("trickNumber","play.@each"),w:function(){return this.getCard("W")}.property("trickNumber","play.@each")})}.call(this),function(){a.IndexRoute=Ember.Route.extend({redirect:function(){var b;return b=a.Deal.random(),this.transitionTo("/boards/"+b.id.toString()+"/"+b.vulnerable+"/"+b.dealer)}})}.call(this),function(){a.TableRoute=Ember.Route.extend({model:function(b){var c,d,e;if(c=new a.Deal(b.board_id,null!=(d=b.dealer)?d.toUpperCase():void 0,null!=(e=b.vulnerable)?e.toUpperCase():void 0),!c.isValid())throw"Invalid deal";return a.Table.create({board:{id:c.id.toString(),dealer:c.dealer,vulnerable:c.vulnerable,bids:[],cards:[],n:c.n(),e:c.e(),s:c.s(),w:c.w()}})},serialize:function(a){return{board_id:a.get("board.id"),vulnerable:a.get("board.vulnerable"),dealer:a.get("board.dealer")}}})}.call(this),function(){a.Router.map(function(){return this.route("table",{path:"/boards/:board_id/:vulnerable/:dealer"})})}.call(this)}.call(this);